---
repos:
  - repo: local
    hooks:
      - id: pants-fmt
        name: Pants Fmt
        entry: pants fmt
        language: system
        pass_filenames: true
        stages: [pre-commit]

      - id: pants-lint
        name: Pants Lint
        entry: pants lint
        language: system
        pass_filenames: true
        types: [python]
        stages: [pre-commit]

      - id: pants-check
        name: Pants Check
        # Type-check changed files and all their dependents to catch type errors.
        entry: pants check --changed-dependents=transitive
        language: system
        stages: [pre-commit]

      - id: pants-test
        name: Pants Test
        # Test changed files and all their dependents to catch downstream effects.
        # This ensures changes to core files (e.g., classifiers) trigger tests
        # in dependent files (e.g., golden tests).
        entry: pants test --changed-dependents=transitive
        language: system
        stages: [pre-commit]

  - repo: https://github.com/compilerla/conventional-pre-commit
    rev: v4.2.0
    hooks:
      - id: conventional-pre-commit
        stages: [commit-msg]
