[GLOBAL]
pants_version = "2.29.0"
unmatched_build_file_globs = "error"
backend_packages = [
    "pants.backend.experimental.adhoc",
    "pants.backend.python",
    "pants.backend.shell",

    "pants.backend.build_files.fmt.ruff",
    # This current fails due to a pip install bug.
    # "pants.backend.python.lint.docformatter",
    "pants.backend.experimental.python.lint.ruff.format",

    "pants.backend.experimental.python.lint.ruff.check",
    "pants.backend.experimental.python.typecheck.pyright",

    # Enable this later
    #"pants.backend.python.providers.experimental.pyenv",

    "pants.backend.experimental.javascript.lint.prettier",
    "pants.backend.experimental.tools.yamllint",

    "pants.backend.shell.lint.shfmt",
    "pants.backend.shell.lint.shellcheck",
]
pants_ignore = [".vscode/settings.json", "apps/**"]
build_ignore = ["3rdparty/*/**"]

[ruff]
# Prefer using Ruff configuration from pyproject.toml.
config = "pyproject.toml"
version = "0.14.10"
known_versions = [
    "0.14.10|macos_arm64|dd0f3ec914604d802658ae0d271ff9d767c117d1702a44222170dd2ffbad8d2c|12364615",
    "0.14.10|macos_x86_64|7d5af84e84a189b49ac235d7970d35588cbed0d087f4237c96e5ac3c392bc6fb|13408056",
    "0.14.10|linux_arm64|f6c8735bf175d449d79151f6bfe84251770ca6032e86bea0d327bc3789179027|12813877",
    "0.14.10|linux_x86_64|4695e6375b1fa2b9c5f839218d695d8e701cfccb15d3f622b6a6feedb086bffb|13860749",
]


[test]
# Pass through selected environment variables to tests so sandboxed runs can
# toggle integration tests and cassette behavior.
# - ENABLE_INTEGRATION_TESTS: Enable integration tests that make real HTTP requests
# - CASSETTE_DIR: Override where VCR cassettes are stored
# - XDG_CACHE_HOME: Used by conftest.py to determine the default cassette cache directory
extra_env_vars = ["ENABLE_INTEGRATION_TESTS", "CASSETTE_DIR", "XDG_CACHE_HOME"]

[pytest]
config = "pyproject.toml"
install_from_resolve = "python-default"
args = ["--no-header", "-rs"]

[coverage-py]
report = "xml"
global_report = true
output_dir = "dist/coverage"

[python]
# Using 3.13 due to ortools support
interpreter_constraints = ["==3.13.*"]
enable_resolves = true

[python.resolves]
python-default = "python-default.lock"

[python-infer]
unowned_dependency_behavior = "error"


[source]
root_patterns = ["/src/"]


[anonymous-telemetry]
enabled = true
repo_id = "5248FD55-6F42-4A65-9D07-ECA6D25DF325"
