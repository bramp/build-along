[GLOBAL]
pants_version = "2.29.0"
unmatched_build_file_globs = "error"
backend_packages = [
    "pants.backend.experimental.adhoc",
    "pants.backend.python",
    "pants.backend.shell",

    "pants.backend.build_files.fmt.ruff",
    # This current fails due to a pip install bug.
    # "pants.backend.python.lint.docformatter",
    "pants.backend.experimental.python.lint.ruff.format",

    "pants.backend.experimental.python.lint.ruff.check",
    "pants.backend.experimental.python.typecheck.pyright",

    # Enable this later
    #"pants.backend.python.providers.experimental.pyenv",

    "pants.backend.experimental.javascript.lint.prettier",
    "pants.backend.experimental.tools.yamllint",

    "pants.backend.shell.lint.shfmt",
    "pants.backend.shell.lint.shellcheck",
]
pants_ignore = [".vscode/settings.json", "apps/**"]
build_ignore = ["3rdparty/*/**"]

[ruff]
# Prefer using Ruff configuration from pyproject.toml.
config = "pyproject.toml"

[test]
# Pass through selected environment variables to tests so sandboxed runs can
# toggle integration tests and cassette behavior.
# - ENABLE_INTEGRATION_TESTS: Enable integration tests that make real HTTP requests
# - CASSETTE_DIR: Override where VCR cassettes are stored
# - XDG_CACHE_HOME: Used by conftest.py to determine the default cassette cache directory
extra_env_vars = ["ENABLE_INTEGRATION_TESTS", "CASSETTE_DIR", "XDG_CACHE_HOME"]

[pytest]
config = "pyproject.toml"
install_from_resolve = "python-default"
args = ["--no-header", "-rs"]

[coverage-py]
report = "xml"
global_report = true
output_dir = "dist/coverage"

[python]
interpreter_constraints = ["==3.14.*"]
enable_resolves = true

[python.resolves]
python-default = "python-default.lock"

[python-infer]
unowned_dependency_behavior = "error"


[source]
root_patterns = [
    "/src/",
    #, "/3rdparty/PyMuPDF/src/"
]


[anonymous-telemetry]
enabled = true
repo_id = "5248FD55-6F42-4A65-9D07-ECA6D25DF325"
